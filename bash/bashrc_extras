# -*- mode: shell-script -*-

EMACS_HOME=${EMACS_HOME:-$HOME}


declare -a bash_files=("funcs.bash" "git.bash" "extras_local.bash" "tmux_completion.sh" "alias.bash" "zfs-completion.bash" "vagrant-completion.bash")

for i in "${bash_files[@]}"
do
	if [ -f "$EMACS_HOME/.emacs.d/bash/$i" ]; then
		. $EMACS_HOME/.emacs.d/bash/$i
	fi

done

# Enable 256 colors
[ "$TERM" = xterm ] && export TERM=xterm-256color

# Set emacs as editor
export EDITOR=emacs

# Add the bin dir to PATH
pathadd $EMACS_HOME/.emacs.d/bin/ after

OS=`uname`

if [[ "$OS" == 'FreeBSD' ]]; then
    source /usr/local/share/bash-completion/bash_completion.sh
fi

if [ -f /etc/bash_completion ]; then
    . /etc/bash_completion
fi

# virtualenvwrapper location on FreeBSD
if [ -f /usr/local/bin/virtualenvwrapper.sh ]; then
    . /usr/local/bin/virtualenvwrapper.sh
fi

# Add the cask bin to PATH
if [ -d $EMACS_HOME/.cask/bin ]; then
	pathadd $EMACS_HOME/.cask/bin
fi

# PYENV
if [[ $EUID -ne 0 ]] && [ -d "$EMACS_HOME/.pyenv" ] ; then
   export PYENV_ROOT="$EMACS_HOME/.pyenv"
   pathadd $PYENV_ROOT/bin
   eval "$(pyenv init -)"
else
   export PYENV_ROOT=""
fi
